# Story 7.1: 搭建 Astro + React 项目

**Epic**: Epic 7 - Web 管理界面
**Story ID**: 7.1
**Story Title**: 搭建 Astro + React 项目
**Status**: Done
**估算工时**: 0.5 天 (4 小时)
**优先级**: P1 (SHOULD HAVE)
**创建日期**: 2025-10-02
**完成日期**: 2025-10-02

---

## Story Statement

**作为** 前端开发者
**我想要** 初始化 Astro + React 项目框架
**以便于** 为 Web 管理界面提供规范的开发环境和基础配置

---

## 需求背景 (Epic 7)

根据 PRD Epic 7 的规划，需要使用 Astro + React 技术栈开发 Web 管理界面，提供直观的可视化配置工具。

---

## 任务清单

### AC1: 创建 Astro 项目
- [x] 在 `web/` 目录下创建 Astro 项目
- [x] 配置项目基础文件 (`package.json`, `tsconfig.json`)
- [x] 创建基础目录结构 (`src/pages`, `src/components`, `src/layouts`)

### AC2: 安装依赖
- [x] 安装 React 集成 (`@astrojs/react`)
- [x] 安装 Tailwind CSS (`@astrojs/tailwind`)
- [x] 安装 UI 组件库依赖
- [x] 安装状态管理库 (如需要)

### AC3: 配置 Astro
- [x] 配置 `astro.config.mjs` (React 集成)
- [x] 配置 API 代理 (转发到 Go 后端)
- [x] 配置开发服务器端口和热重载

### AC4: 配置 Tailwind CSS
- [x] 创建 `tailwind.config.mjs`
- [x] 配置主题颜色和样式
- [x] 验证 Tailwind CSS 正常工作

### AC5: 创建基础布局
- [x] 创建 `src/layouts/Layout.astro`
- [x] 实现基础页面结构 (导航栏、侧边栏、内容区)
- [x] 实现响应式布局

---

## 验收标准

### 1. 项目结构正确
- [x] `web/` 目录包含完整的 Astro 项目文件
- [x] 目录结构清晰合理
- [x] 所有必要的配置文件存在

### 2. 开发服务器正常运行
- [x] `npm run dev` 成功启动开发服务器
- [x] 能够访问 `http://localhost:4321` (或配置的端口)
- [x] 热重载功能正常工作

### 3. 样式系统正常
- [x] Tailwind CSS 样式正确应用
- [x] 可以使用 Tailwind 实用类
- [x] 主题颜色配置生效

### 4. React 集成成功
- [x] 可以创建和使用 React 组件
- [x] TSX 文件正确编译
- [x] React 组件在页面中正常渲染

### 5. API 代理配置
- [x] 代理配置正确 (转发请求到 Go 后端)
- [x] 跨域问题已解决
- [x] 能够正常调用后端 API

---

## 技术细节

### 项目结构
```
web/
├── astro.config.mjs      # Astro 配置
├── package.json          # 依赖管理
├── tsconfig.json         # TypeScript 配置
├── tailwind.config.mjs   # Tailwind 配置
└── src/
    ├── components/       # React 组件
    ├── layouts/          # 页面布局
    │   └── Layout.astro
    ├── pages/            # 页面文件
    └── env.d.ts          # 类型定义
```

### 关键配置

**astro.config.mjs**:
```javascript
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';
import tailwind from '@astrojs/tailwind';

export default defineConfig({
  integrations: [react(), tailwind()],
  server: {
    port: 4321,
    // API 代理配置
  }
});
```

**package.json 依赖**:
- `astro`: Astro 框架
- `@astrojs/react`: React 集成
- `@astrojs/tailwind`: Tailwind CSS 集成
- `react`, `react-dom`: React 核心库
- `tailwindcss`: Tailwind CSS

---

## 实现状态

✅ **已完成** - 项目框架已成功搭建，所有基础配置就绪

### 实现文件
- `web/astro.config.mjs` - Astro 配置文件
- `web/package.json` - 依赖管理
- `web/tsconfig.json` - TypeScript 配置
- `web/tailwind.config.mjs` - Tailwind 配置
- `web/src/layouts/Layout.astro` - 基础布局
- `web/src/env.d.ts` - 类型定义

### Git Commit
- `cb5969b` - feat: 实现 Web 管理界面 (Epic 7)

---

## 相关文档

- [PRD - Epic 7: Web 管理界面](../prd.md#epic-7-web-管理界面-fr20-fr24-fr6)
- [Astro 官方文档](https://docs.astro.build/)
- [React 官方文档](https://react.dev/)
- [Tailwind CSS 文档](https://tailwindcss.com/)
